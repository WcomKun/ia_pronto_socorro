<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IA de Pronto‚ÄëSocorro ‚Äî Feira de Ideias</title>
  <style>
    :root {
      --bg: #0b1020;
      --panel: #121a33;
      --panel-2: #0f162b;
      --text: #e8ecff;
      --muted: #aab4db;
      --accent: #66d9ff;
      --accent-2: #8affc1;
      --danger: #ff6b6b;
      --warn: #ffd166;
      --ok: #8cff9a;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius-xl: 22px;
      --radius: 14px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 600px at 20% -10%, rgba(102,217,255,.08), transparent),
                  radial-gradient(900px 500px at 120% 20%, rgba(138,255,193,.08), transparent),
                  var(--bg);
      color: var(--text);
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .app {
      width: min(1100px, 100%);
      display: grid;
      grid-template-columns: 380px 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){
      .app { grid-template-columns: 1fr; }
    }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
      border: 1px solid rgba(255,255,255,.06);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .sidebar { padding: 18px; }
    .brand {
      display: flex; align-items: center; gap: 12px; margin-bottom: 12px;
    }
    .brand .logo {
      width: 44px; height: 44px; display: grid; place-items: center; border-radius: 12px;
      background: linear-gradient(135deg, rgba(102,217,255,.2), rgba(138,255,193,.2));
      border: 1px solid rgba(255,255,255,.1);
    }
    .brand h1 { font-size: 20px; margin: 0; }
    .tag { font-size: 12px; color: var(--muted); }

    .disclaimer {
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 14px; padding: 12px 14px; margin: 10px 0 16px 0;
      color: var(--muted);
    }
    .disclaimer b { color: var(--text); }

    .buttons { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
    .chip {
      padding: 8px 12px; border-radius: 999px; border: 1px solid rgba(255,255,255,.1);
      background: rgba(255,255,255,.03); color: var(--text); cursor: pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .chip:hover { transform: translateY(-1px); background: rgba(255,255,255,.06); }

    .emergency {
      display: grid; gap: 10px; margin-top: 10px;
    }
    .btn {
      border: none; cursor: pointer; font-weight: 600; letter-spacing: .2px;
      padding: 12px 14px; border-radius: 12px; color: #08101f;
      box-shadow: var(--shadow);
    }
    .btn-danger { background: linear-gradient(180deg, var(--danger), #ff4d4d); }
    .btn-warn { background: linear-gradient(180deg, var(--warn), #ffb703); }
    .btn-ghost { background: rgba(255,255,255,.06); color: var(--text); border: 1px solid rgba(255,255,255,.08); }

    .chat { position: relative; display: grid; grid-template-rows: auto 1fr auto; height: 80vh; }
    .chat header { padding: 16px 18px; border-bottom: 1px solid rgba(255,255,255,.06); }
    .chat header h2 { margin: 0; font-size: 18px; }

    .messages { padding: 18px; overflow: auto; display: grid; gap: 12px; background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)); }
    .msg { max-width: 80%; padding: 12px 14px; border-radius: 14px; border: 1px solid rgba(255,255,255,.08); }
    .msg.user { justify-self: end; background: rgba(102,217,255,.15); border-color: rgba(102,217,255,.25); }
    .msg.bot { justify-self: start; background: rgba(255,255,255,.04); }
    .msg .small { display:block; font-size: 12px; opacity: .8; margin-top: 6px; }

    .composer { display: grid; grid-template-columns: 1fr auto; gap: 8px; padding: 12px; border-top: 1px solid rgba(255,255,255,.06); background: var(--panel-2); }
    .input {
      width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,.12);
      background: rgba(13, 19, 40, .7); color: var(--text);
    }
    .send { padding: 12px 16px; border-radius: 12px; border: 1px solid rgba(255,255,255,.12); background: linear-gradient(180deg, var(--accent), #51bfe0); color: #00121c; font-weight: 700; cursor: pointer; }

    .kpis { display: grid; grid-template-columns: repeat(3,1fr); gap: 10px; margin-top: 12px; }
    .kpi { background: rgba(255,255,255,.03); border: 1px solid rgba(255,255,255,.06); padding: 10px; border-radius: 12px; }
    .kpi .v { font-size: 18px; font-weight: 800; }

    .footer-note { text-align: center; color: var(--muted); font-size: 12px; padding-top: 8px; }
    a { color: var(--accent); }
  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="card sidebar">
      <div class="brand">
        <div class="logo">ü©∫</div>
        <div>
          <h1>PS‚ÄëIA ‚Ä¢ Assistente de Pronto‚ÄëSocorro</h1>
          <div class="tag">Para fins educativos ‚Ä¢ N√£o substitui atendimento m√©dico</div>
        </div>
      </div>

      <div class="disclaimer">
        <b>Aviso importante:</b> Esta IA oferece <b>orienta√ß√µes gerais de primeiros socorros</b> e <b>triagem educativa</b>. Em caso de emerg√™ncia real, ligue para <b>192 (SAMU)</b> ou procure um servi√ßo de sa√∫de. Se houver risco de vida, <b>ligue imediatamente</b>.
      </div>

      <div class="kpis">
        <div class="kpi"><div class="v" id="kpi-red">0</div><div>Alertas graves</div></div>
        <div class="kpi"><div class="v" id="kpi-warn">0</div><div>Cuidados urgentes</div></div>
        <div class="kpi"><div class="v" id="kpi-ok">0</div><div>Casos leves</div></div>
      </div>

      <h3 style="margin-top:16px">Atalhos</h3>
      <div class="buttons">
        <button class="chip" data-example="Estou com dor no peito e falta de ar">Dor no peito</button>
        <button class="chip" data-example="Cortei o dedo, est√° sangrando moderado">Corte com sangramento</button>
        <button class="chip" data-example="Crian√ßa com febre 39 e v√¥mito">Febre em crian√ßa</button>
        <button class="chip" data-example="Torcei o tornozelo jogando bola">Entorse</button>
        <button class="chip" data-example="Pessoa desmaiou e n√£o respira">Parada respirat√≥ria</button>
        <button class="chip" data-example="Sinais de AVC: boca torta e fala enrolada">Suspeita de AVC</button>
      </div>

      <h3 style="margin-top:16px">Emerg√™ncia</h3>
      <div class="emergency">
        <a class="btn btn-danger" href="tel:192">üìû Ligar 192 (SAMU)</a>
        <a class="btn btn-warn" href="tel:193">üî• Ligar 193 (Bombeiros)</a>
        <button class="btn btn-ghost" id="btn-red-flags">Ver sinais de alerta</button>
      </div>

      <div class="footer-note">Projeto: Feira de Ideias ‚Ä¢ Voc√™ pode embutir este widget em qualquer p√°gina HTML.</div>
    </aside>

    <!-- Chat -->
    <section class="card chat">
      <header>
        <h2>Converse com a IA</h2>
      </header>
      <div class="messages" id="messages" aria-live="polite"></div>
      <div class="composer">
        <input id="input" class="input" placeholder="Descreva o que est√° acontecendo (ex.: pessoa com dificuldade para respirar, idoso com queda, etc.)" />
        <button id="send" class="send">Enviar</button>
      </div>
    </section>
  </div>

  <script>
    // ‚Äî‚Äî‚Äî Engine de triagem local (rule‚Äëbased, sem backend) ‚Äî‚Äî‚Äî
    const rules = [
      // Alertas graves ‚Äî ligar 192
      {
        label: 'Parada respirat√≥ria/cardiaca',
        level: 'red',
        match: /nao respira|n√£o respira|sem pulso|parada|inconsciente e nao respira|inconsciente e n√£o respira/i,
        advice: [
          'Emerg√™ncia cr√≠tica: ligue para 192 imediatamente.',
          'Inicie compress√µes tor√°cicas se a pessoa n√£o respira e n√£o responde: 100‚Äë120/min, no centro do peito, profundidade ~5cm em adultos. Revezar se poss√≠vel.',
          'Se houver DEA, ligue-o e siga as instru√ß√µes sonoras at√© a chegada do SAMU.'
        ]
      },
      {
        label: 'Dor tor√°cica + falta de ar',
        level: 'red',
        match: /dor no peito|aperto no peito|falta de ar|dificuldade para respirar/i,
        advice: [
          'Pode ser emerg√™ncia (infarto/embolia/asma grave). Ligue 192 agora.',
          'Sente-se em posi√ß√£o confort√°vel; afrouxe roupas apertadas. Evite esfor√ßo e n√£o dirija.',
          'Se a pessoa tiver prescri√ß√£o de nitrato, use conforme orienta√ß√£o m√©dica. N√£o administre medicamentos por conta pr√≥pria.'
        ]
      },
      {
        label: 'AVC ‚Äî sinais cl√°ssicos',
        level: 'red',
        match: /avc|derrame|boca torta|fraqueza de um lado|fala enrolada|assimetria facial/i,
        advice: [
          'Sinais de AVC. Aja r√°pido: ligue 192 imediatamente.',
          'Anote o hor√°rio de in√≠cio dos sintomas. N√£o ofere√ßa comida ou bebida. Mantenha a pessoa confort√°vel e segura.'
        ]
      },
      {
        label: 'Anafilaxia',
        level: 'red',
        match: /alergia grave|anafilaxia|incha√ßo na l√≠ngua|chiado|urticaria extensa|urtic√°ria extensa|engasgando com alergia/i,
        advice: [
          'Suspeita de anafilaxia. Ligue 192.',
          'Se a pessoa possui auto‚Äëinje√ß√£o de adrenalina prescrita, use imediatamente.',
          'Deite com pernas elevadas se n√£o houver falta de ar; se houver, posi√ß√£o sentada/al√≠vio.'
        ]
      },
      {
        label: 'Hemorragia grave',
        level: 'red',
        match: /sangramento intenso|hemorragia|jato de sangue|sangue nao para|sangue n√£o para/i,
        advice: [
          'Aplique compress√£o direta forte e cont√≠nua com pano limpo/garrote apenas se compress√£o n√£o controlar.',
          'Mantenha o membro elevado se poss√≠vel. Ligue 192 imediatamente.'
        ]
      },
      {
        label: 'Trauma craniano grave/convuls√£o',
        level: 'red',
        match: /trauma craniano grave|queda da propria altura com desmaio|convuls/i,
        advice: [
          'Mantenha vias a√©reas livres, proteja a cabe√ßa, afaste objetos duros/pontiagudos.',
          'N√£o contenha os movimentos. Ap√≥s a crise, coloque em posi√ß√£o lateral de seguran√ßa. Acione 192.'
        ]
      },

      // Urgentes (amarelo)
      {
        label: 'Queimadura moderada a extensa',
        level: 'warn',
        match: /queimadura(?! leve)|bolhas grandes|eletrico|el√©trico|quimica|qu√≠mica/i,
        advice: [
          'Resfrie a √°rea com √°gua corrente em temperatura ambiente por 20 minutos. N√£o use gelo, pasta de dente, caf√© ou pomadas caseiras.',
          'Cubra com gaze est√©ril/tecido limpo. Procure avalia√ß√£o em servi√ßo de urg√™ncia.'
        ]
      },
      {
        label: 'Ferimento com sangramento moderado',
        level: 'warn',
        match: /corte (profundo|aberto)|sangrando moderado|ponteira exposta|vidro|sutura/i,
        advice: [
          'Lave com √°gua corrente limpa. Aplique compress√£o por 10 minutos e eleve o membro.',
          'Se a borda do corte abre ou suja/porco, procure servi√ßo para avalia√ß√£o de sutura e vacina antitet√¢nica.'
        ]
      },
      {
        label: 'Crise asm√°tica leve/moderada',
        level: 'warn',
        match: /asma|chiado ao respirar|bombinha/i,
        advice: [
          'Use broncodilatador conforme prescri√ß√£o (ex.: 2 puffs, espa√ßador).',
          'Se n√£o melhorar em 15‚Äì20 min ou piorar, procure urg√™ncia. Em sinais graves, ligue 192.'
        ]
      },

      // Leves (verde)
      {
        label: 'Febre em crian√ßa',
        level: 'ok',
        match: /crian(√ßa|ca).*febre|febre em crian√ßa/i,
        advice: [
          'Ofere√ßa l√≠quidos, roupas leves e mantenha o ambiente arejado.',
          'Antit√©rmico apenas se orientado por profissional (dose por peso). Observe sinais de alerta: sonol√™ncia excessiva, rigidez de nuca, respira√ß√£o r√°pida, v√¥mitos persistentes ‚Äî se houver, procure urg√™ncia.'
        ]
      },
      {
        label: 'Entorse/tor√ß√£o',
        level: 'ok',
        match: /entorse|torci|tor√ß√£o|inchei o tornozelo/i,
        advice: [
          'Protocolo RICE nas primeiras 24‚Äì48h: Repouso, Gelo envolto em pano 15‚Äì20min a cada 2‚Äì3h, Compress√£o el√°stica, Eleva√ß√£o.',
          'Se dor intensa, incapacidade de apoiar o peso, deformidade ou estalos, procure avalia√ß√£o para descartar fratura.'
        ]
      },
      {
        label: 'Gastroenterite leve',
        level: 'ok',
        match: /diarreia leve|diarr√©ia leve|enjoo leve|n√°usea leve|v√¥mito leve/i,
        advice: [
          'Hidrata√ß√£o fracionada (pequenos goles frequentes). Soro de reidrata√ß√£o √© o ideal.',
          'Evite anti‚Äëdiarreicos sem orienta√ß√£o. Sinais de alerta: sangue nas fezes, febre alta persistente, sinais de desidrata√ß√£o ‚Äî procure servi√ßo.'
        ]
      }
    ];

    const RED_FLAGS_LIST = [
      'Dificuldade para respirar/falta de ar',
      'Dor intensa no peito, irradia√ß√£o para bra√ßo/mand√≠bula',
      'Boca torta, fraqueza em um lado do corpo, fala enrolada (AVC)',
      'Sangramento intenso que n√£o cessa com press√£o',
      'Convuls√£o prolongada (>5 min) ou repetida',
      'Desmaio sem recupera√ß√£o r√°pida, aus√™ncia de respira√ß√£o/pulso',
      'Queimaduras extensas, el√©tricas ou qu√≠micas',
      'Rea√ß√£o al√©rgica com incha√ßo de l√≠ngua/l√°bios ou chiado (anafilaxia)',
      'Trauma craniano com v√¥mitos, sonol√™ncia ou confus√£o',
    ];

    // ‚Äî‚Äî‚Äî UI helpers ‚Äî‚Äî‚Äî
    const messagesEl = document.getElementById('messages');
    const inputEl = document.getElementById('input');
    const sendEl = document.getElementById('send');

    const kpis = { red: 0, warn: 0, ok: 0 };
    const setKPI = () => {
      document.getElementById('kpi-red').textContent = kpis.red;
      document.getElementById('kpi-warn').textContent = kpis.warn;
      document.getElementById('kpi-ok').textContent = kpis.ok;
    };

    function addMsg(text, who='bot'){
      const div = document.createElement('div');
      div.className = `msg ${who}`;
      div.innerHTML = text;
      messagesEl.appendChild(div);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function replyWelcome(){
      addMsg('<b>Ol√°! üëã Sou a PS‚ÄëIA.</b> Descreva o que est√° acontecendo e eu direi se h√° <b>sinais de alerta</b> e quais <b>primeiros socorros</b> podem ajudar at√© voc√™ conseguir atendimento. <span class="small">Lembre: educa√ß√£o em sa√∫de ‚Äî n√£o substitui avalia√ß√£o m√©dica.</span>');
    }

    function analyze(text){
      const hits = rules.filter(r => r.match.test(text));
      if(hits.length === 0){
        addMsg('Obrigado pela descri√ß√£o. Pelo que entendi, n√£o identifiquei um alerta cr√≠tico autom√°tico. Posso dar orienta√ß√µes gerais, mas <b>se voc√™ est√° em d√∫vida sobre gravidade, procure um servi√ßo de urg√™ncia</b> ou ligue 192. Quer me contar idade, sintomas principais e h√° quanto tempo?');
        return;
      }

      // Escolhe o maior n√≠vel (red > warn > ok)
      const priority = { red: 3, warn: 2, ok: 1 };
      hits.sort((a,b) => priority[b.level]-priority[a.level]);
      const top = hits[0];

      if(top.level === 'red') kpis.red++; else if(top.level==='warn') kpis.warn++; else kpis.ok++;
      setKPI();

      const badge = top.level==='red' ? 'üö® Emerg√™ncia' : (top.level==='warn' ? '‚ö†Ô∏è Urgente' : '‚úÖ Caso leve');
      const color = top.level==='red' ? 'style="color: var(--danger)"' : (top.level==='warn' ? 'style="color: var(--warn)"' : 'style="color: var(--ok)"');

      let nextSteps = '';
      if(top.level==='red'){
        nextSteps = '<li>üëâ <b>Ligue 192 (SAMU) agora</b> ou pe√ßa para algu√©m ligar.</li>';
      } else if(top.level==='warn'){
        nextSteps = '<li>üë©‚Äç‚öïÔ∏è Procure <b>atendimento na urg√™ncia</b> nas pr√≥ximas horas.</li>';
      } else {
        nextSteps = '<li>üè† Medidas de autocuidado podem ajudar. Observe evolu√ß√£o dos sintomas.</li>';
      }

      addMsg(`<div ${color}><b>${badge}</b> ‚Ä¢ ${top.label}</div>
              <div style="margin-top:6px">O que fazer agora:</div>
              <ul>${nextSteps}${top.advice.map(a=>`<li>${a}</li>`).join('')}</ul>
              <div class="small">Se novos sinais de alerta surgirem, acione 192.</div>`);

      // Sugest√£o de checklist segura
      if(top.level !== 'red'){
        addMsg('Quer um <b>checklist r√°pido</b>? Informe: idade, comorbidades, come√ßo dos sintomas (data/hora) e medicamentos usados hoje.');
      }
    }

    function onSend(){
      const text = (inputEl.value||'').trim();
      if(!text) return;
      addMsg(text.replace(/</g,'&lt;'), 'user');
      inputEl.value='';
      setTimeout(()=> analyze(text), 150);
    }

    // Eventos UI
    sendEl.addEventListener('click', onSend);
    inputEl.addEventListener('keydown', e=>{ if(e.key==='Enter'){ onSend(); }});
    document.querySelectorAll('.chip').forEach(el=> el.addEventListener('click', ()=>{
      inputEl.value = el.dataset.example;
      inputEl.focus();
    }));

    document.getElementById('btn-red-flags').addEventListener('click', ()=>{
      addMsg(`<b>üß≠ Sinais de alerta que exigem 192:</b><ul>${RED_FLAGS_LIST.map(x=>`<li>${x}</li>`).join('')}</ul>`);
    });

    // Boot
    replyWelcome();
    setKPI();
  </script>
</body>
</html>


